<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Irccd Lua API Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<h1>Navigation</h1>
<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Class_Socket">Class Socket </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/irccd.util.html">irccd.util</a></li>
  <li><a href="../modules/irccd.fs.html">irccd.fs</a></li>
  <li><a href="../modules/irccd.html">irccd</a></li>
  <li><a href="../modules/irccd.logger.html">irccd.logger</a></li>
  <li><a href="../modules/irccd.parser.html">irccd.parser</a></li>
  <li><a href="../modules/irccd.thread.pipe.html">irccd.thread.pipe</a></li>
  <li><a href="../modules/irccd.plugin.html">irccd.plugin</a></li>
  <li><a href="../modules/irccd.server.html">irccd.server</a></li>
  <li><strong>irccd.socket</strong></li>
  <li><a href="../modules/irccd.socket.address.html">irccd.socket.address</a></li>
  <li><a href="../modules/irccd.socket.listener.html">irccd.socket.listener</a></li>
  <li><a href="../modules/irccd.system.html">irccd.system</a></li>
  <li><a href="../modules/irccd.thread.html">irccd.thread</a></li>
</ul>
<h2>Topics</h2>
<ul class="nowrap">
  <li><a href="../topics/1-Introduction.md.html">1-Introduction.md</a></li>
  <li><a href="../topics/1.1-Standard-Libraries.md.html">1.1-Standard-Libraries.md</a></li>
  <li><a href="../topics/2-Plugin_creation.md.html">2-Plugin_creation.md</a></li>
  <li><a href="../topics/2.1-Using_irccd_test.md.html">2.1-Using_irccd_test.md</a></li>
  <li><a href="../topics/2.2-List_of_Events.md.html">2.2-List_of_Events.md</a></li>
  <li><a href="../topics/3-Event-Action.md.html">3-Event-Action.md</a></li>
  <li><a href="../topics/3-Event-Channel-notice.md.html">3-Event-Channel-notice.md</a></li>
  <li><a href="../topics/3-Event-Command.md.html">3-Event-Command.md</a></li>
  <li><a href="../topics/3-Event-Connect.md.html">3-Event-Connect.md</a></li>
  <li><a href="../topics/3-Event-Invite.md.html">3-Event-Invite.md</a></li>
  <li><a href="../topics/3-Event-Join.md.html">3-Event-Join.md</a></li>
  <li><a href="../topics/3-Event-Kick.md.html">3-Event-Kick.md</a></li>
  <li><a href="../topics/3-Event-Load.md.html">3-Event-Load.md</a></li>
  <li><a href="../topics/3-Event-Message.md.html">3-Event-Message.md</a></li>
  <li><a href="../topics/3-Event-Mode.md.html">3-Event-Mode.md</a></li>
  <li><a href="../topics/3-Event-Names.md.html">3-Event-Names.md</a></li>
  <li><a href="../topics/3-Event-Nick.md.html">3-Event-Nick.md</a></li>
  <li><a href="../topics/3-Event-Notice.md.html">3-Event-Notice.md</a></li>
  <li><a href="../topics/3-Event-Part.md.html">3-Event-Part.md</a></li>
  <li><a href="../topics/3-Event-Query.md.html">3-Event-Query.md</a></li>
  <li><a href="../topics/3-Event-Reload.md.html">3-Event-Reload.md</a></li>
  <li><a href="../topics/3-Event-Topic.md.html">3-Event-Topic.md</a></li>
  <li><a href="../topics/3-Event-Unload.md.html">3-Event-Unload.md</a></li>
  <li><a href="../topics/3-Event-User-mode.md.html">3-Event-User-mode.md</a></li>
  <li><a href="../topics/3-Event-Whois.md.html">3-Event-Whois.md</a></li>
  <li><a href="../topics/3-Event-QueryCommand.md.html">3-Event-QueryCommand.md</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/Connect.lua.html">Connect.lua</a></li>
  <li><a href="../examples/Formatting.lua.html">Formatting.lua</a></li>
  <li><a href="../examples/Server.lua.html">Server.lua</a></li>
  <li><a href="../examples/Welcome.lua.html">Welcome.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>irccd.socket</code></h1>

<p>Sockets.</p>
<p> This API provides support for low level sockets. It currently
 suports AF_INET, AF_INET6 and AF_LOCAL (on Unix only).</p>

<p> <h2>Addresses</h2></p>

<p> Starting from irccd 1.2, a new address system has been designed. Now
 addresses are simple raw Lua tables. However, they are updated by irccd.socket
 API for performance.</p>

<p> For example, when binding a socket, you can use the following code:</p>

<pre><code>s:bind {
    address = "*",
    port    = 8989,
}
</code></pre>

<p> After the call, the table will have a new internal field that describe the
 resolved address. For instance, if you plan to use sendto a lot, it is
 recommended to create a table before sending like this:</p>

<pre><code>local host = {
     host   = "localhost",
     port   = 80
}

s:sendto("Test", host)
</code></pre>

<p> After the first call to sendto, the host table will be updated and further
 call will use the resolved address.</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#new">new (family, type)</a></td>
	<td class="summary">Create a new socket.</td>
	</tr>
</table>
<h2><a href="#Class_Socket">Class Socket </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Socket:accept">Socket:accept ()</a></td>
	<td class="summary">Accept a client.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:bind">Socket:bind (address)</a></td>
	<td class="summary">Bind to an address.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:blockMode">Socket:blockMode (mode)</a></td>
	<td class="summary">Set the blocking mode.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:close">Socket:close ()</a></td>
	<td class="summary">Close the socket.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:connect">Socket:connect (address)</a></td>
	<td class="summary">Connect to an end point.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:listen">Socket:listen (count)</a></td>
	<td class="summary">Listen to a number of pending connections.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:receive">Socket:receive (howmany)</a></td>
	<td class="summary"><span class="deprecated">(deprecated)</span> Receive some data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:receiveFrom">Socket:receiveFrom (howmany)</a></td>
	<td class="summary"><span class="deprecated">(deprecated)</span> Receive some data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:send">Socket:send (data)</a></td>
	<td class="summary">Send some data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:send">Socket:send (data, address)</a></td>
	<td class="summary"><span class="deprecated">(deprecated)</span> Send some data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:sendto">Socket:sendto (data, address)</a></td>
	<td class="summary">Send data to not connected socket.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:recv">Socket:recv (howmany)</a></td>
	<td class="summary">Get some data as a stream mode.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:recvfrom">Socket:recvfrom (howmany)</a></td>
	<td class="summary">Get some data from a peer, typically UDP.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Socket:set">Socket:set (level, name, arg)</a></td>
	<td class="summary">Set an option.</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "new"></a>
    <strong>new (family, type)</strong>
    </dt>
    <dd>
    Create a new socket.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">family</span>
         one of the irccd.socket.family
        </li>
        <li><span class="parameter">type</span>
         one of the irccd.socket.type
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the created socket or nil</li>
        <li>
        the error message</li>
    </ol>




</dd>
</dl>
    <h2><a name="Class_Socket"></a>Class Socket </h2>

    <dl class="function">
    <dt>
    <a name = "Socket:accept"></a>
    <strong>Socket:accept ()</strong>
    </dt>
    <dd>
    Accept a client. </p>

<p> The address table will have the following fields:</p>

<p> <br />
 For internet families:
 <ul>
 <li><strong>ip (string)</strong>: Optional, the IP</li>
 <li><strong>host (string)</strong>: Optional, the hostname</li>
 <li><strong>service (string)</strong>: Optional, the service name</li>
 <li><strong>port (number)</strong>: Optional, the port number</li>
 </ul>
 <br />
 For unix families: <strong>(not supported on Windows)</strong>
 <ul>
 <li><strong>path (string)</strong>: The path</li>
 </ul>


    <h3>Returns:</h3>
    <ol>
        <li>
        the accepted socket (or nil)</li>
        <li>
        the address table</li>
        <li>
        the error message if any</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:bind"></a>
    <strong>Socket:bind (address)</strong>
    </dt>
    <dd>
    Bind to an address.
 The address table must have the following fields:</p>

<p> <br />
 For internet families:
 <ul>
 <li><strong>address (string)</strong>: Required, the address or "*" for any</li>
 <li><strong>port (number)</strong>: Required, the port number</li>
 <li><strong>family (enum)</strong>: Optional, the family. Default: same as socket</li>
 </ul>
 <br />
 For unix families: <strong>(not supported on Windows)</strong>
 <ul>
 <li><strong>path (string)</strong>: Required, the path</li>
 </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">address</span>
         the address
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        true on success</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:blockMode"></a>
    <strong>Socket:blockMode (mode)</strong>
    </dt>
    <dd>
    Set the blocking mode.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
         the mode
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        true on success</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:close"></a>
    <strong>Socket:close ()</strong>
    </dt>
    <dd>
    Close the socket.
 This function is required when you have finished using the socket,
 the __gc metamethod will not close the socket.






</dd>
    <dt>
    <a name = "Socket:connect"></a>
    <strong>Socket:connect (address)</strong>
    </dt>
    <dd>
    Connect to an end point.
 The address table must have the following fields:</p>

<p> <br />
 For internet families:
 <ul>
 <li><strong>host (string)</strong>: Required, the hostname</li>
 <li><strong>port (number)</strong>: Required, the port number</li>
 <li><strong>family (enum)</strong>: Optional, the family. Default: same as socket</li>
 <li><strong>type (enum)</strong>: Optional, the type. Default: same as socket</li>
 </ul>
 <br />
 For unix families: <strong>(not supported on Windows)</strong>
 <ul>
 <li><strong>path (string)</strong>: Required, the path</li>
 </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">address</span>
         the address
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        true on success</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:listen"></a>
    <strong>Socket:listen (count)</strong>
    </dt>
    <dd>
    Listen to a number of pending connections.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">count</span>
         an optional count, default: 64.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        true on success</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:receive"></a>
    <strong>Socket:receive (howmany)</strong>
    </dt>
    <dd>
    <span class="deprecated">(deprecated)</span> Receive some data.
 Get some data as a stream mode.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">howmany</span>
         how much to receive
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the read string or nil</li>
        <li>
        the error message</li>
    </ol>


    <h3>See also:</h3>
    <ul>
         <li><a href="../modules/irccd.socket.address.html#">irccd.socket.address</a></li>
         <li><a href="../modules/irccd.socket.html#Socket:recv">Socket:recv</a></li>
    </ul>


</dd>
    <dt>
    <a name = "Socket:receiveFrom"></a>
    <strong>Socket:receiveFrom (howmany)</strong>
    </dt>
    <dd>
    <span class="deprecated">(deprecated)</span> Receive some data.
 Get some data from a peer, typically UDP.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">howmany</span>
         how much to receive
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the read string or nil</li>
        <li>
        the address</li>
        <li>
        the error message</li>
    </ol>


    <h3>See also:</h3>
    <ul>
         <li><a href="../modules/irccd.socket.address.html#">irccd.socket.address</a></li>
         <li><a href="../modules/irccd.socket.html#Socket:recvfrom">Socket:recvfrom</a></li>
    </ul>


</dd>
    <dt>
    <a name = "Socket:send"></a>
    <strong>Socket:send (data)</strong>
    </dt>
    <dd>
    Send some data.
 This function sends data to a stream based socket.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span>
         the data
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the number of bytes sent or nil</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:send"></a>
    <strong>Socket:send (data, address)</strong>
    </dt>
    <dd>
    <span class="deprecated">(deprecated)</span> Send some data.
 This function sends data to a datagram based socket. This function signature
 is deprecated and new code should use sendto instead.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span>
         the data
        </li>
        <li><span class="parameter">address</span>
         where to send
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the number of bytes sent or nil</li>
        <li>
        the error message</li>
    </ol>


    <h3>See also:</h3>
    <ul>
         <li><a href="../modules/irccd.socket.address.html#">irccd.socket.address</a></li>
         <li><a href="../modules/irccd.socket.html#Socket:sendto">Socket:sendto</a></li>
    </ul>


</dd>
    <dt>
    <a name = "Socket:sendto"></a>
    <strong>Socket:sendto (data, address)</strong>
    </dt>
    <dd>
    Send data to not connected socket.
 The address table must have the following fields:</p>

<p> <br />
 For internet families:
 <ul>
 <li><strong>host (string)</strong>: Required, the hostname</li>
 <li><strong>port (number)</strong>: Required, the port number</li>
 <li><strong>family (enum)</strong>: Optional, the family. Default: same as socket</li>
 <li><strong>type (enum)</strong>: Optional, the type. Default: same as socket</li>
 </ul>
 <br />
 For unix families: <strong>(not supported on Windows)</strong>
 <ul>
 <li><strong>path (string)</strong>: Required, the path</li>
 </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span>
         the data
        </li>
        <li><span class="parameter">address</span>
         the address
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the number of bytes sent or nil</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:recv"></a>
    <strong>Socket:recv (howmany)</strong>
    </dt>
    <dd>
    Get some data as a stream mode.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">howmany</span>
         how much to receive
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the read string or nil</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:recvfrom"></a>
    <strong>Socket:recvfrom (howmany)</strong>
    </dt>
    <dd>
    Get some data from a peer, typically UDP.
 This function will return the same address if the same client sent
 data. That same table will only be returned if you didn't discard
 the return value.</p>

<p> This is useful if you want to keep track the data by users.</p>

<p> </br >
 The address table will have the following fields:</p>

<p> <br />
 For internet families:
 <ul>
 <li><strong>ip (string)</strong>: Optional, the IP</li>
 <li><strong>host (string)</strong>: Optional, the hostname</li>
 <li><strong>service (string)</strong>: Optional, the service name</li>
 <li><strong>port (number)</strong>: Optional, the port number</li>
 </ul>
 <br />
 For unix families: <strong>(not supported on Windows)</strong>
 <ul>
 <li><strong>path (string)</strong>: The path</li>
 </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">howmany</span>
         how much to receive
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        the read string or nil</li>
        <li>
        the client address</li>
        <li>
        the error message</li>
    </ol>




</dd>
    <dt>
    <a name = "Socket:set"></a>
    <strong>Socket:set (level, name, arg)</strong>
    </dt>
    <dd>
    Set an option.
 This function is a wrapper around the setsockopt function. Level and
 name are string which may refer to the following:
 <br /><br /></p>

<p> Levels available:
 <ul>
 <li><span class="parameter">socket</span>: the SOL_SOCKET level</li>
 <li><span class="parameter">tcp</span>: the IPPROTO_TCP level</li>
 <li><span class="parameter">ipv6</span>: the IPPROTO_IPV6 level</li>
 </ul>
 <br /></p>

<p> The following options belong to <span class="parameter">socket</span>
 level:</p>

<p> <ul></p>

<p> <li>
 <span class="parameter">reuse-address</span>: bool, reuse the
 address.
 </li></p>

<p> <li>
 <span class="parameter">broadcast</span>: bool, sending broadcast
 data
 </li></p>

<p> <li>
 <span class="parameter">debug</span>: bool, print debug
 information
 </li></p>

<p> <li>
 <span class="parameter">keep-alive</span>: bool, enable sending
 keep alive packets
 </li>
 </ul></p>

<p> <br /></p>

<p> The following options belong to <span class="parameter">tcp</span>
 level:</p>

<p> <ul></p>

<p> <li>
 <span class="parameter">no-delay</span>: bool, Disables the Nagle
 algorithm for send coalescing
 </li>
 </ul></p>

<p> <br /></p>

<p> The following options belong to <span class="parameter">ipv6</span>
 level:</p>

<p> <ul>
 <li>
 <span class="parameter">v6only</span>: bool, disable or enable the
 IPv6 mode only
 </li>
 </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">level</span>
         the level
        </li>
        <li><span class="parameter">name</span>
         the name
        </li>
        <li><span class="parameter">arg</span>
         the argument (depend on above)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        true on success or nil</li>
        <li>
        the error message</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">s:set(<span class="string">"socket"</span>, <span class="string">"reuse-address"</span>, <span class="keyword">true</span>)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.0</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
